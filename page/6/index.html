<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="行大于言">
<meta property="og:type" content="website">
<meta property="og:title" content="favoorr's blog">
<meta property="og:url" content="https://favoorr.github.io/page/6/index.html">
<meta property="og:site_name" content="favoorr's blog">
<meta property="og:description" content="行大于言">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="favoorr's blog">
<meta name="twitter:description" content="行大于言">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 8936411,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://favoorr.github.io/page/6/"/>

  <title> favoorr's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f95fe4bd64019414c93e0effeabc5001";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">favoorr's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/22/debug-jekyll-blog/" itemprop="url">
                  博客的折腾
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-22T10:36:06+08:00" content="2015-04-22">
              2015-04-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/blog/jekyll/" itemprop="url" rel="index">
                    <span itemprop="name">jekyll</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/22/debug-jekyll-blog/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/22/debug-jekyll-blog/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/04/22/debug-jekyll-blog/" class="leancloud_visitors" data-flag-title="博客的折腾">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>去年开始使用 markdown 在 github 上使用 github Pages 来写博客，<br>最开始，我是直接fork别人得模板，修改了 _config.yml 里面的配置，<br>就 push 到 github 上，可以通过 favoorr.github.io 来进行访问了</p>
<p>现在遇到了一个问题，就是在处理</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">段落内容</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> (<span class="string">'Hello world!)'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Hello world!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Hello world!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面那种段落或者语法高亮时，我的必须使用</p>
<p>{ % highlight  linenos    %<br> { –% endhighlight –% </p>
<p>来实现，jekyll 原生支持的，我一直不知道为什么，用 MacDown 在 OS X 上写的时候，<br>我发现他那个里面可以非常方便的设置，于是决定，要求我的也可以这么来写，这是<br>不能容忍的</p>
<p>找了文章</p>
<p><a href="http://www.jianshu.com/p/6c157af09e84" target="_blank" rel="external">Mac 下两款 Markdown 编辑器 Mou/MacDown 大 PK</a><br><a href="http://liberize.me/tech/bootstrap-tweaks.html" target="_blank" rel="external">Bootstrap 简单定制 - 二、设置代码高亮</a>    </p>
<p><a href="http://jekyllcn.com/docs/configuration/#markdown-" target="_blank" rel="external">jekyll官网的说明</a><br><a href="https://help.github.com/articles/github-flavored-markdown/#fenced-code-blocks" target="_blank" rel="external">github 关于enced-code-blocks</a><br><a href="(https://github.com/vmg/redcarpet/blob/v2.2.2/README.markdown#and-its-like-really-simple-to-use)">redcarpet灵活的扩展</a></p>
<p><a href="http://yulijia.net/cn/%E6%89%80%E6%80%9D%E6%89%80%E6%82%9F/2015/04/03/basic-knowledge-of-build-a-blog-theme.html" target="_blank" rel="external">一个博客模版应该包括的内容</a> </p>
<p><a href="http://jekyllthemes.org/" target="_blank" rel="external">官方主题库</a><br><a href="http://www.zhanxin.info/themes.html" target="_blank" rel="external">掌心个人设计的主题</a></p>
<p>问题出在使用的 markdown 解释器上，默认是 <code>liquid</code> ，这里使用另外一种，也即是 从markdown 翻译到 HTML 使用的引擎,<br>这项功能使用 <code>redcarpet</code></p>
<p>再者就是 <code>redcarpet</code> 支持<a href="(https://github.com/vmg/redcarpet/blob/v2.2.2/README.markdown#and-its-like-really-simple-to-use)">灵活的扩展</a> 然后我的问题解决方法如下，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">markdown: redcarpet</span><br><span class="line">redcarpet:</span><br><span class="line">  extensions: [&quot;no_intra_emphasis&quot;, &quot;fenced_code_blocks&quot;, &quot;autolink&quot;, &quot;strikethrough&quot;, &quot;superscript&quot;, &quot;with_toc_data&quot;, &quot;tables&quot;]</span><br></pre></td></tr></table></figure>
<p>-EOF-</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/20/config-non-password-login-for-ubuntu/" itemprop="url">
                  ubuntu-配置无密码登录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-20T11:31:14+08:00" content="2015-04-20">
              2015-04-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ssh/" itemprop="url" rel="index">
                    <span itemprop="name">ssh</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ssh/ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">ubuntu</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/20/config-non-password-login-for-ubuntu/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/20/config-non-password-login-for-ubuntu/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/04/20/config-non-password-login-for-ubuntu/" class="leancloud_visitors" data-flag-title="ubuntu-配置无密码登录">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ubuntu-配置无密码登录"><a href="#ubuntu-配置无密码登录" class="headerlink" title="ubuntu-配置无密码登录"></a>ubuntu-配置无密码登录</h1><p>给Ubuntu设置无密码登录，必须做的工作，有时会耗费时间，积累，下次节约时间</p>
<p>需求</p>
<p>主机免密码登录 elk1 和 elk2</p>
<p>第一步，主机添加host解析</p>
<pre><code>192.168.137.251 elk1
192.168.137.252 elk2
</code></pre><p>第二步，elk1生成.ssh目录</p>
<pre><code>ssh-keygen ,一路回车，执行后，生成本机的.ssh目录
</code></pre><p>第三步，打开elk1的ssh公钥保存文件，第一次配置需要打开，后续不需要</p>
<pre><code>sudo vi /etc/ssh/sshd_config

AuthorizedKeysFile      %h/.ssh/authorized_keys 这一行，取消注释
</code></pre><p>第四步，elk1加入主机的公钥</p>
<pre><code>cd ~/.ssh

vim authorized_keys 把主机的公钥粘贴进来，ok
</code></pre><p>第五步，重启 elk1 的 ssh 服务</p>
<pre><code>/etc/init.d/ssh stop
/etc/init.d/ssh start
</code></pre><p>第六步，验证</p>
<pre><code>主机输入

ssh elk1@elk1 成功无密码登录，ok
</code></pre><p>以上描述的是第一次添加，如果不是第一次添加，只需要第四步，就ok</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/05/install-start-zookeeper/" itemprop="url">
                  zookeeper入门-安装和启动-关闭服务
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-05T10:29:59+08:00" content="2015-04-05">
              2015-04-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/zookeeper/" itemprop="url" rel="index">
                    <span itemprop="name">zookeeper</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/05/install-start-zookeeper/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/05/install-start-zookeeper/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/04/05/install-start-zookeeper/" class="leancloud_visitors" data-flag-title="zookeeper入门-安装和启动-关闭服务">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从 Paxos 到 ZooKeeper ，分步实一致性原理到实践 读书笔记</p>
<p>zk配置</p>
<pre><code>tickTime=2000
dataDir=/tmp/zookeeper
clientPort=2181
initLimit=10
syncLimit=5
server.1=IP1:2888:3888
server.2=IP2:2888:3888
server.3=IP3:2888:3888
</code></pre><p>server.id 每一行，代表一台机器<br>需要在数据目录 dataDir 创建myid文件，里面写机器编号<br>集群中 zoo.cfg 应该使用 svn 或者 git 管理，确保每台机器上的文件都能够一致<br>id 的范围是 1 ~ 255     </p>
<p>启动服务</p>
<pre><code>使用自带的shell启动
sh zkServer.sh start

使用原始Java方式启动
java -cp zookeeper-3.4.6.jar:lib/slf4j-api-1.6.1.jar:lib/slf4j-log4j12-1.6.1.jar:lib/log4j-1.2.16.jar:conf org.apache.zookeeper.server.quorum.QuorumPeerMain conf/zoo.cfg
</code></pre><p>验证服务</p>
<pre><code>telnet 127.0.0.1 2181

stat
</code></pre><p>停止服务</p>
<pre><code>sh zkServer.sh stop
</code></pre><p>zk可执行脚本</p>
<p>zkCleanup.sh 清理 zookeeper 的历史数据，包括事务日志文件和快照数据文件<br>zkCli.sh ZooKeeper 的简易客户端<br>zkEnv.sh 设置 ZooKeeper 的环境变量<br>zkServer.sh ZooKeeper服务的启动、停止、重启脚本    </p>
<p>-EOF-</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/02/06/up-yourself/" itemprop="url">
                  身边没有牛人，如何进步
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-02-06T15:56:11+08:00" content="2015-02-06">
              2015-02-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/heart/" itemprop="url" rel="index">
                    <span itemprop="name">heart</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/02/06/up-yourself/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/06/up-yourself/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/02/06/up-yourself/" class="leancloud_visitors" data-flag-title="身边没有牛人，如何进步">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="不在牛人成堆的环境中，你的进步，靠什么加持？"><a href="#不在牛人成堆的环境中，你的进步，靠什么加持？" class="headerlink" title="不在牛人成堆的环境中，你的进步，靠什么加持？"></a>不在牛人成堆的环境中，你的进步，靠什么加持？</h1><p>我自己微博上的回答：</p>
<p>成为牛人的心，安排时间看书，实践</p>
<p>还有很重要的忘记说了，分享自己积累的，博客和公司内部培训，要敢于分享，也算是对自己学习的一个验证，不沉淀下来，到头来，还是null</p>
<p><strong>本文只讲了自己的体会，没有具体例子，会补充</strong></p>
<p>看到这个问题就随手评论了，因为自己就在经历，也就早做 :)</p>
<p>我没有牛人师父，我自己去发掘了很多可以向他们学习的人，自己觉得优秀的人，通过互联网单向跟着他们学习，完善自己，总结，沉淀，形成自己的方法论</p>
<p>每个人都有一些自己的经历，我说说自己的：</p>
<p>“牛”的定义，自己脑海中要先有牛的定义，先要知道自己还有很多东西不知道，很多东西自己做不到，自己有很多方面可以去提高，去完善，当然这里不能去追求极致去为难自己，心要会想</p>
<p>我大概在08年的时候，玩一个“流星蝴蝶剑”的游戏，是一个纯竞技的游戏，完全靠自己，这个游戏，新手在1年内，成长起来的话，算是快的，而且想成长必须跟玩家对打，结果就是被各种吊打，过程中我结识了小七、飘儿，小七的单武器在平台上数一数二，飘儿的澄海3C是战队的代表，而且比赛都有公开媒体报道。从他们那里，我第一次有了一种可以做的更优秀的心，中间被吊打的好几年，那个过程很重要，是一种经历，还有一首诗，我收藏到现在</p>
<pre><code>技出群雄而谦虚不骄者为强 
技术中等而学上导下者为强 
技不如人而恭心求进者为强 
技出群雄而自高自满者为弱 
技术中等而惧上鄙下者为弱 
技不如人而自暴自弃者为弱
</code></pre><p>当然，这个很容易形成争强好胜之心，而且只在刹那间。</p>
<p>我是个幸运的人，第一次初识计算机，是在初中二年级，当时有种相见恨晚的感觉，也就在一瞬间，我知道了这辈子我要玩这个玩上一辈子，事实上，我也一直这么做的。再说学习计算机很重要的一个，英语，对英语没有天生的恐惧感和厌恶感，反而很喜欢，在讲英语的时候，整个人的感觉都特别好，对英文资料也没有排斥的感觉，这点上，我感觉自己已经是非常幸运了</p>
<p>然后说身处在当前这个互联网时代是幸运的，虽然我大天朝屏蔽了国外的世界，但是国内也很精彩，身边没有牛人怎么办，到互联网上去找，微博、知乎、豆瓣、infoq上能找的很多，到那些平台上后，就有一种感觉，自己知道得太少了，自己出生的太晚了，但是我身边确实有人不玩这些的，时间总在走，不花费在这里总要干点别得事情，到哪找到优秀的人都可以，找到自己的同类人，然后取长补短，IT界有个特点，很多牛人他们乐于分享，享受分享，就怕你一直停留在自己的小世界</p>
<p>读书，上学的时候，对读书的意义，没有过多的思考，只知道我过段时间要考试，“书是智慧的结晶，是人类进步的阶梯”，多么优美得文字，上学的时候只知道它是段文字而已，可能更多是因为上学的时候一直没开窍，也怪自从有英语课程之后，英语的分数一直考得比语文好的不是一点，读书，我的受益真的很大，但是我知道，开始这个过程有多难，拿起书就犯困，拿起书就走神，人总要对自己狠一回，如果你还没有养成读书的习惯，我希望你对自己狠的第一件事就是开始让自己读书。我现在发现一个问题，牛人们看书更多，我追得好几个博客，他们都有分享自己看书的故事，感慨自己觉悟太晚</p>
<p>读书，在选择读什么书的时候，我建议是找到自己领域优秀的人，他们总会给你建议，然后就是寻找优秀信息的能力，优秀是会传染的，优秀人得圈子，也有很多好东西等着你去发掘。书的内容，总是作者智慧和经验的总结，走着别人踩过坑的路，能节省多少时间，这个已经无法衡量。</p>
<p>认识到时间的珍贵，在你不断发掘牛人，学习优秀技术或工具的时候，总会感觉时间不够用，越发能体会到时间的珍贵，这些道理，别人讲再多也都是徒劳，必须有自己体会才可以，才会懂得让自己更加高效，比如会使用付费VPN去翻墙，不再等待免费得各种卡顿，会为看优酷视频区付费，不想等待广告，会换个Mac笔记本，不用去等待开机，不用去等待 。。。，更多是自己不想等待，想快起来。</p>
<p>知识，好坏与多少，没有精确的度，我的想法是学习除了在工作上解决问题之外去分享，而且很多工作用不到的东西，也需要去学习，分享对自己思路的整理，对自己成果的肯定，维护一个自己的blog，开始分享吧 :)</p>
<p>做，牛人找了再多，看了再多，听了再多，开始对自己所处领域有了更多了解，了解仅仅是了解，自己想成为牛人，光了解是远远不够的，不求精通，但是熟悉是必须的，熟悉就至少去实践，对就是实践，很多人往往会想好自己要干什么，干什么，但是想了很久，发现自己还是仅仅想好了。我要感谢一位同学当时说的“写博客，不管是csdn还是github都行，关键是写”，就因为这句话，我去开始写了，然后还一直持续着，开始行动后，更加想着进步。</p>
<p>牛人，也都是普通人成长、积累、沉淀的结果，如果回顾牛人走过的路，他们也都曾经苦逼过，现在沿着他们给的捷径，没有理由不去奔跑</p>
<p>-EOF-</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/01/31/install-mysql-on-centos6/" itemprop="url">
                  Centos6.6安装mysql手记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-01-31T14:57:35+08:00" content="2015-01-31">
              2015-01-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/mysql-linux/" itemprop="url" rel="index">
                    <span itemprop="name">mysql linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/01/31/install-mysql-on-centos6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/31/install-mysql-on-centos6/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/01/31/install-mysql-on-centos6/" class="leancloud_visitors" data-flag-title="Centos6.6安装mysql手记">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Centos6安装mysql手记"><a href="#Centos6安装mysql手记" class="headerlink" title="Centos6安装mysql手记"></a>Centos6安装mysql手记</h1><p>由于并非专业dba，这东西是用的时候才会去找，避免下次浪费同样时间，虽写本篇手记</p>
<h1 id="环境依赖"><a href="#环境依赖" class="headerlink" title="环境依赖"></a>环境依赖</h1><p>mbp系统：Mac os x 10.10.1<br>Linux： centos 6.6（可以参照<a href="/free-mirrors/">这里</a>下载ios镜像）<br>虚拟机软件：virtualbox4.3.20，<a href="/mac-use-virtualbox/">使用帮助</a></p>
<p>大概过程如下：</p>
<ol>
<li>官方下载</li>
<li>官方安装说明</li>
<li>详细安装步骤，安装过程中遇到的问题</li>
<li>安装成功</li>
<li>测试运行</li>
<li>总结</li>
</ol>
<p>选择安装版本</p>
<p>我直接去mysql官网<a href="http://www.mysql.com/downloads/" target="_blank" rel="external">http://www.mysql.com/downloads/</a>下载的，英语阅读尚可，就可以直接去官网下<br>这里我选择的是Oracle发布版本，然后选择RPM安装包</p>
<p>点击下载页的选项</p>
<pre><code>Download from Oracle eDelivery »
</code></pre><p>我选择的系统是RHEL6(Red Hat Enterprise Linux) ，64位版本</p>
<pre><code>MySQL Database 5.6.22 TAR for Generic Linux (glibc2.5) x86 (64bit)

MySQL Database 5.6.22 RPM for Oracle Linux / RHEL 7 x86 (64bit)

MySQL Database 5.6.22 RPM for Oracle Linux / RHEL 6 x86 (64bit) ，这个是我要找的

... ...
</code></pre><p>安装说明</p>
<p>官方安装说明<a href="http://dev.mysql.com/doc/refman/5.6/en/linux-installation-rpm.html" target="_blank" rel="external">http://dev.mysql.com/doc/refman/5.6/en/linux-installation-rpm.html</a><br>因为下载zip后，解压，你会看到很多个rpm，可以看官方说明，然后了解下包之间的关系</p>
<p>安装</p>
<p>虚拟机建立目录</p>
<pre><code>[root@centos65 ~]# mkdir -p /data/soft

[root@centos65 soft]# ll -d /data/soft/
drwxr-xr-x. 2 root root 4096 1月  31 13:49 /data/soft/
</code></pre><p>发送安装包到虚拟机，已经<a href="/macosx-config-ssh-login-virtual-machine-without-password/">配置了ssh免密码登录</a></p>
<pre><code>scp V73603-01.zip root@centos65:/data/soft/
</code></pre><p>查看centos6.6自带版本</p>
<pre><code>[root@centos65 soft]# rpm -qa | grep mysql
mysql-libs-5.1.73-3.el6_5.x86_64
</code></pre><p>删除自带版本</p>
<pre><code>[root@centos65 soft]# rpm -e mysql-libs-5.1.73-3.el6_5.x86_64
</code></pre><p>依次安装如下rpm</p>
<pre><code>rpm -ivh MySQL-devel-advanced-5.6.22-1.el6.x86_64.rpm
rpm -ivh MySQL-shared-advanced-5.6.22-1.el6.x86_64.rpm
rpm -ivh MySQL-shared-compat-advanced-5.6.22-1.el6.x86_64.rpm
rpm -ivh MySQL-client-advanced-5.6.22-1.el6.x86_64.rpm
rpm -ivh MySQL-test-advanced-5.6.22-1.el6.x86_64.rpm
</code></pre><p>在安装embedded-advanced的时候，会因为缺少libaio而错误</p>
<pre><code>[root@master mysql]# rpm -ivh MySQL-embedded-advanced-5.6.22-1.el6.x86_64.rpm
error: Failed dependencies:
    libaio.so.1()(64bit) is needed by MySQL-embedded-advanced-5.6.22-1.el6.x86_64
    libaio.so.1(LIBAIO_0.1)(64bit) is needed by MySQL-embedded-advanced-5.6.22-1.el6.x86_64
    libaio.so.1(LIBAIO_0.4)(64bit) is needed by MySQL-embedded-advanced-5.6.22-1.el6.x86_64
</code></pre><p>安装libaio</p>
<pre><code>yum install libaio
</code></pre><p>再次安装embedded-advanced,以及server-advanced</p>
<pre><code>rpm -ivh MySQL-embedded-advanced-5.6.22-1.el6.x86_64.rpm
rpm -ivh MySQL-server-advanced-5.6.22-1.el6.x86_64.rpm
</code></pre><p>安装MySQL-server-advanced-5.6.22-1.el6.x86_64.rpm，成功后能看到如下信息，如果没有看到如下信息，就是安装的时候有问题了</p>
<pre><code>[root@centos65 soft]# rpm -ivh MySQL-server-advanced-5.6.22-1.el6.x86_64.rpm
Preparing...                ########################################### [100%]
   1:MySQL-server-advanced  ########################################### [100%]
warning: user mysql does not exist - using root
warning: group mysql does not exist - using root
2015-01-31 14:30:05 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2015-01-31 14:30:05 1971 [Note] InnoDB: Using atomics to ref count buffer pool pages
2015-01-31 14:30:05 1971 [Note] InnoDB: The InnoDB memory heap is disabled
2015-01-31 14:30:05 1971 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2015-01-31 14:30:05 1971 [Note] InnoDB: Memory barrier is not used
2015-01-31 14:30:05 1971 [Note] InnoDB: Compressed tables use zlib 1.2.3
2015-01-31 14:30:05 1971 [Note] InnoDB: Using Linux native AIO
2015-01-31 14:30:05 1971 [Note] InnoDB: Not using CPU crc32 instructions
2015-01-31 14:30:05 1971 [Note] InnoDB: Initializing buffer pool, size = 128.0M
2015-01-31 14:30:05 1971 [Note] InnoDB: Completed initialization of buffer pool
2015-01-31 14:30:05 1971 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!
2015-01-31 14:30:05 1971 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB
2015-01-31 14:30:05 1971 [Note] InnoDB: Database physically writes the file full: wait...
2015-01-31 14:30:05 1971 [Note] InnoDB: Setting log file ./ib_logfile101 size to 48 MB
2015-01-31 14:30:05 1971 [Note] InnoDB: Setting log file ./ib_logfile1 size to 48 MB
2015-01-31 14:30:05 1971 [Note] InnoDB: Renaming log file ./ib_logfile101 to ./ib_logfile0
2015-01-31 14:30:05 1971 [Warning] InnoDB: New log files created, LSN=45781
2015-01-31 14:30:05 1971 [Note] InnoDB: Doublewrite buffer not found: creating new
2015-01-31 14:30:05 1971 [Note] InnoDB: Doublewrite buffer created
2015-01-31 14:30:05 1971 [Note] InnoDB: 128 rollback segment(s) are active.
2015-01-31 14:30:05 1971 [Warning] InnoDB: Creating foreign key constraint system tables.
2015-01-31 14:30:05 1971 [Note] InnoDB: Foreign key constraint system tables created
2015-01-31 14:30:05 1971 [Note] InnoDB: Creating tablespace and datafile system tables.
2015-01-31 14:30:05 1971 [Note] InnoDB: Tablespace and datafile system tables created.
2015-01-31 14:30:05 1971 [Note] InnoDB: Waiting for purge to start
2015-01-31 14:30:05 1971 [Note] InnoDB: 5.6.22 started; log sequence number 0
2015-01-31 14:30:05 1971 [Note] RSA private key file not found: /var/lib/mysql//private_key.pem. Some authentication plugins will not work.
2015-01-31 14:30:05 1971 [Note] RSA public key file not found: /var/lib/mysql//public_key.pem. Some authentication plugins will not work.
A random root password has been set. You will find it in &apos;/root/.mysql_secret&apos;.
2015-01-31 14:30:05 1971 [Note] Binlog end
2015-01-31 14:30:05 1971 [Note] InnoDB: FTS optimize thread exiting.
2015-01-31 14:30:05 1971 [Note] InnoDB: Starting shutdown...
2015-01-31 14:30:07 1971 [Note] InnoDB: Shutdown completed; log sequence number 1625977


2015-01-31 14:30:07 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2015-01-31 14:30:07 1994 [Note] InnoDB: Using atomics to ref count buffer pool pages
2015-01-31 14:30:07 1994 [Note] InnoDB: The InnoDB memory heap is disabled
2015-01-31 14:30:07 1994 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2015-01-31 14:30:07 1994 [Note] InnoDB: Memory barrier is not used
2015-01-31 14:30:07 1994 [Note] InnoDB: Compressed tables use zlib 1.2.3
2015-01-31 14:30:07 1994 [Note] InnoDB: Using Linux native AIO
2015-01-31 14:30:07 1994 [Note] InnoDB: Not using CPU crc32 instructions
2015-01-31 14:30:07 1994 [Note] InnoDB: Initializing buffer pool, size = 128.0M
2015-01-31 14:30:07 1994 [Note] InnoDB: Completed initialization of buffer pool
2015-01-31 14:30:07 1994 [Note] InnoDB: Highest supported file format is Barracuda.
2015-01-31 14:30:07 1994 [Note] InnoDB: 128 rollback segment(s) are active.
2015-01-31 14:30:07 1994 [Note] InnoDB: Waiting for purge to start
2015-01-31 14:30:07 1994 [Note] InnoDB: 5.6.22 started; log sequence number 1625977
2015-01-31 14:30:07 1994 [Note] RSA private key file not found: /var/lib/mysql//private_key.pem. Some authentication plugins will not work.
2015-01-31 14:30:07 1994 [Note] RSA public key file not found: /var/lib/mysql//public_key.pem. Some authentication plugins will not work.
2015-01-31 14:30:07 1994 [Note] Binlog end
2015-01-31 14:30:07 1994 [Note] InnoDB: FTS optimize thread exiting.
2015-01-31 14:30:07 1994 [Note] InnoDB: Starting shutdown...
2015-01-31 14:30:09 1994 [Note] InnoDB: Shutdown completed; log sequence number 1625987




A RANDOM PASSWORD HAS BEEN SET FOR THE MySQL root USER !
You will find that password in &apos;/root/.mysql_secret&apos;.

You must change that password on your first connect,
no other statement but &apos;SET PASSWORD&apos; will be accepted.
See the manual for the semantics of the &apos;password expired&apos; flag.

Also, the account for the anonymous user has been removed.

In addition, you can run:

  /usr/bin/mysql_secure_installation

which will also give you the option of removing the test database.
This is strongly recommended for production servers.

See the manual for more instructions.

Please report any problems at http://bugs.mysql.com/

The latest information about MySQL is available on the web at

  http://www.mysql.com

Support MySQL by buying support/licenses at http://shop.mysql.com

New default config file was created as /usr/my.cnf and
will be used by default by the server when you start it.
You may edit this file to change server settings
</code></pre><p>上面有用的信息，</p>
<ol>
<li>已经生成了默认的密码，放在<code>/root/.mysql_secret</code>,</li>
<li>在你执行任何操作之前，必须修改默认密码</li>
<li>如果是生产库，建议运行<code>/usr/bin/mysql_secure_installation</code>按照提示，优化安装</li>
</ol>
<p>看到上面信息，说明整个安装已经成功了。</p>
<p>测试运行</p>
<pre><code>直接输入
mysql

错误信息

ERROR 2002 (HY000): Can&apos;t connect to local MySQL server through socket &apos;/var/lib/mysql/mysql.sock&apos; (2)
</code></pre><p>这个原因是没有启动mysql服务，5.6.22版本服务名称是<code>mysql</code>,之前是<code>mysqld</code>,可以通过 <code>ll /etc/init.d/ | grep mysql</code>查询</p>
<pre><code>启动mysql服务
service mysql start
</code></pre><p>再次输入</p>
<pre><code>mysql

错误信息

ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: NO)
</code></pre><p>这是因为没有输入root的密码，mysql5.6.22为每个版本默认设置了密码，放在隐藏文件下</p>
<pre><code>查看生成的默认root密码，每个人，应该都不相同
[root@centos65 soft]# cat /root/.mysql_secret
# The random password set for the root user at Sat Jan 31 14:30:05 2015 (local time): vc82GaO9xntAL9HK

使用密码再次登录
mysql -uroot -pvc82GaO9xntAL9HK

执行简单命令
mysql&gt; show databases;

错误信息
ERROR 1820 (HY000): You must SET PASSWORD before executing this statement

必须重置默认密码

SET PASSWORD = PASSWORD(&apos;000000&apos;);
</code></pre><p>设置后，<code>\q</code>退出mysql命令行<code>ctrl + c</code>暴力退出</p>
<p>再次登录</p>
<pre><code>[root@centos65 soft]# mysql -uroot -p000000
</code></pre><p>所有工作ok。</p>
<p>我在有一台机器上遇到如下错误</p>
<pre><code>service mysql start ，遇到下面错误
Starting MySQL. ERROR! The server quit without updating PID file (/var/lib/mysql/master.pid).
</code></pre><p>说明根本没有安装成功，可能是磁盘满了，那台机器硬盘空间较小，之前搞过hadoop集群测试，<br>不过这个问题，每个人情况可能都不一样</p>
<p>总结</p>
<ol>
<li>mysql 5.6.22 和之前相比较，提升了很多新东西，建议升级</li>
<li>Linux centos 6 上安装和mac区别太大，遇到问题，要能搞定</li>
<li>学会看官方文档和Google</li>
</ol>
<p>-EOF-</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://s.gravatar.com/avatar/1201556b6846d721f1f1a49691a558b2?s=80&r=g"
               alt="favoorr" />
          <p class="site-author-name" itemprop="name">favoorr</p>
          <p class="site-description motion-element" itemprop="description">行大于言</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">79</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">78</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">64</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/favoorr" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">favoorr</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"favoorr"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  






  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("M2FQAkfbJbv4CwKXhJe5Egt6-gzGzoHsz", "2rPdNb288trrULLw1QQzBUSs");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
